{"version":3,"sources":["domain/ships.js","components/input.js","components/input-card.js","images/ship.jpg","pages/home.js","components/list-entry.js","components/ship-entry.js","services/ships.js","contexts/ships.js","hooks/ships.js","pages/results.js","App.js","index.js"],"names":["timeConversionMultiplierMap","Map","consumablesRegex","isValidDistance","value","Number","isInteger","computeMinimumStops","distanceInMegalights","ship","isNaN","MGLT","shipHasValidMegalights","test","consumables","has","match","shipHasValidConsumables","consumablesLimitInHours","quantity","qualifier","multiplier","get","parseInt","convertConsumablesLimitToHours","Math","ceil","IconButton","styled","MaterialIconButton","Form","Paper","MaterialInput","InputBase","Divider","MaterialDivider","Input","useState","distance","setDistance","history","useHistory","handleChange","useCallback","event","newValue","target","handleClick","push","onChange","placeholder","inputProps","type","aria-label","onClick","orientation","Container","div","Subcontainer","Title","h1","Separator","hr","InputCard","BackgroundImage","background","Home","ListEntry","firstColumn","secondColumn","ShipEntry","name","model","getUrl","page","fetchShips","a","url","axios","response","data","count","results","ShipsContext","createContext","Ships","children","isFetching","useRef","loadedPages","setLoadedPages","pageCount","setPageCount","ships","setShips","fetchNewShipBatch","current","newShipsArray","slice","getShipsPage","includes","Provider","useShips","useContext","Section","section","Header","header","DistanceDisplay","Footer","Results","location","useLocation","setPage","useEffect","query","URLSearchParams","search","then","to","map","Pagination","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4347b250.chunk.js","sourcesContent":["const timeConversionMultiplierMap = new Map([\n  [\"year\", 365 * 24],\n  [\"month\", 30 * 24],\n  [\"week\", 7 * 24],\n  [\"day\", 1 * 24],\n  [\"hour\", 1]\n]);\n\nconst consumablesRegex = /(\\d{1,})\\s(\\w*[^s])s?$/; // separates consumables digits and qualifier in singular\n\n\nexport const convertConsumablesLimitToHours = (consumables) => {\n  const [, quantity, qualifier] = consumables.match(consumablesRegex);\n  const multiplier = timeConversionMultiplierMap.get(qualifier);\n  return parseInt(quantity) * multiplier;\n}\n\nexport const shipHasValidMegalights = (ship) => !isNaN(ship.MGLT);\n\nexport const shipHasValidConsumables = (ship) => consumablesRegex.test(ship.consumables)\n&& timeConversionMultiplierMap.has(ship.consumables.match(consumablesRegex)[2]);\n\nexport const isValidDistance = (value) => value !== \"\" && Number.isInteger(Number(value));\n\nexport const computeMinimumStops = (distanceInMegalights, ship) => {\n  if(shipHasValidMegalights(ship) && shipHasValidConsumables(ship)){\n    const consumablesLimitInHours = convertConsumablesLimitToHours(ship.consumables);\n    return Math.ceil(distanceInMegalights / ship.MGLT / consumablesLimitInHours) - 1;\n  }\n  return null;\n}","import { useHistory } from \"react-router-dom\";\nimport { useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport MaterialDivider from '@material-ui/core/Divider';\nimport MaterialIconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nimport { isValidDistance } from '../domain/ships';\n\nconst IconButton = styled(MaterialIconButton)`\n  padding: 10px;\n`;\n\nconst Form = styled(Paper)`\n  margin: 2em 0;\n  padding: 2px 4px;\n  display: flex;\n  align-items: center;\n  align-self: center;\n  width: 100%;\n  max-width: 500px;\n`;\n\nconst MaterialInput = styled(InputBase)`\n  margin-left: 1em;\n  flex: 1;\n`;\n\nconst Divider = styled(MaterialDivider)`\n  height: 28px;\n  margin: 4px;\n`;\n\nfunction Input() {\n  const [distance, setDistance]= useState(\"\");\n  const history = useHistory();\n\n  const handleChange = useCallback((event) => {\n    const newValue = event.target.value;\n    if(newValue === \"\" || isValidDistance(newValue)){\n      setDistance(newValue);\n    }\n  }, [setDistance]);\n\n  const handleClick = useCallback(() => {\n    if(isValidDistance(distance)){\n      history.push(`/results?distance=${distance}`)\n    }\n  }, [distance, history]);\n\n  return (\n    <Form>\n      <MaterialInput\n        value={distance}\n        onChange={handleChange}\n        placeholder=\"Distance in MGLT\"\n        inputProps={{ 'aria-label': 'calculate number of stops' }}\n      />\n      <IconButton type=\"submit\" aria-label=\"calculate stops\" onClick={handleClick}>\n        <SendIcon />\n      </IconButton>\n      <Divider orientation=\"vertical\" />\n    </Form>\n  );\n}\n\nexport default Input;","import styled from 'styled-components';\nimport Input from './input';\n\nconst Container = styled.div`\n  position: relative;\n  height: 600px;\n  width: 90vw;\n`;\n\nconst Subcontainer = styled.div`\n  position: absolute;\n  box-sizing: border-box;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  top: -1.5em;\n  height: 100%;\n  width: 100%;\n  background-color: #3365A0;\n  margin: 0 5vw;\n  padding: 2em 1.5em;\n  border-radius: 10px;\n  text-align: center;\n\n  p {\n    color: #F2E8CF;\n  }\n`;\n\nconst Title = styled.h1`\n  font-size: 2em;\n  font-weight: 900;\n  text-transform: uppercase;\n  color: #FDC500;\n`;\n\nconst Separator = styled.hr`\n  border-top: 1px solid #F2E8CF;\n  margin: 2em 0;\n`;\n\n\n\nfunction InputCard() {\n  return (\n    <Container>\n      <Subcontainer>\n        <Title>Spacetrip Stops Calculator</Title>\n        <Separator />\n        <p>\n          Do you have a business meeting in Tatooine and have no\n          ideia how many stops you're gonna have to make until you get there?\n          Perhaps a small vacation in Naboo? No problem,\n          just type in the number of Megalights of your trip\n          and search for you ship model below to find out!\n        </p>\n        <Input />\n      </Subcontainer>\n    </Container>\n  );\n}\n\nexport default InputCard;","export default __webpack_public_path__ + \"static/media/ship.cdfcada7.jpg\";","import styled from 'styled-components';\n\nimport InputCard from '../components/input-card';\nimport background from '../images/ship.jpg';\n\nconst BackgroundImage = styled.div`\n  background: url(${background}) no-repeat fixed;\n  background-position: 50% -250px;\n  background-size: cover;\n  width: 100vw;\n  height: 300px;\n`;\n\nfunction Home() {\n  return (\n    <div>\n      <BackgroundImage />\n      <InputCard />\n    </div>\n  );\n}\n\nexport default Home;","import styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst ListEntry = ({firstColumn, secondColumn}) => (\n  <Container>\n    <span>{firstColumn}</span>\n    <span>{secondColumn}</span>\n  </Container>\n)\n\nexport default ListEntry;","import styled from \"styled-components\";\n\nimport ListEntry from './list-entry';\nimport { computeMinimumStops } from '../domain/ships';\n\n\nconst Separator = styled.hr`\n  border-top: 1px solid rgba(51, 101, 160, 0.3);\n  margin: 1em 0;\n  margin-left: 0;\n  margin-right: 0;\n`;\n\nconst ShipEntry = (distance) => (ship) =>(\n  <div key={ship.model}>\n    <Separator />\n    <ListEntry\n      firstColumn={ship.name}\n      secondColumn={computeMinimumStops(distance, ship)}\n    />\n  </div>\n)\n\nexport default ShipEntry;","import axios from 'axios';\n\nconst getUrl = (page) => `https://swapi.dev/api/starships/?page=${page}`;\n\nexport const fetchShips = async (page) => {\n  const url = getUrl(page);\n  const response = await axios.get(url);\n  const { count, results } = response.data;\n  return {\n    count,\n    results\n  };\n}","import React, { createContext, useState, useCallback, useRef } from 'react';\nimport { fetchShips } from '../services/ships';\n\nexport const ShipsContext = createContext();\n\nconst PAGE_SIZE = 10;\n\nfunction Ships ({ children }) {\n  const isFetching = useRef(false);\n  const [loadedPages, setLoadedPages] = useState([]);\n  const [pageCount, setPageCount] = useState(1);\n  const [ships, setShips] = useState([]);\n\n  const fetchNewShipBatch = useCallback(async (page) => {\n    isFetching.current = true;\n    const { results, count} = await fetchShips(page);\n\n    const newShipsArray = ships.slice();\n    newShipsArray[page - 1] = results;\n    setShips(newShipsArray);\n    setPageCount(Math.ceil(count/PAGE_SIZE));\n    setLoadedPages([...loadedPages, page]);\n\n    isFetching.current = false;\n    return results;\n  }, [loadedPages, ships]);\n\n  const getShipsPage = useCallback(async (page) => {\n    if(isFetching.current){\n      return [];\n    }\n    if(loadedPages.includes(page)){\n      return ships[page - 1];\n    }\n    return await fetchNewShipBatch(page);\n  }, [fetchNewShipBatch, loadedPages, ships]);\n\n  return (\n    <ShipsContext.Provider value={{\n      getShipsPage,\n      pageCount\n    }}\n    >\n      {children}\n    </ShipsContext.Provider>\n  );\n};\n\nexport default Ships;\n","import { useContext } from 'react';\nimport { ShipsContext } from '../contexts/ships';\n\nconst useShips = () => useContext(ShipsContext);\n\nexport default useShips;\n","import { useEffect, useState } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport styled from \"styled-components\";\nimport Pagination from '@material-ui/lab/Pagination';\n\nimport ShipEntry from '../components/ship-entry';\nimport ListEntry from '../components/list-entry';\nimport useShips from '../hooks/ships';\n\nconst Container = styled.div`\n  text-align: center;\n`;\n\nconst Section = styled.section`\n  padding: 2em 1.5em;\n\n  p {\n    margin-bottom: 3em;\n  }\n`;\n\nconst Header = styled.header`\n  font-size: 0.6em;\n  font-weight: 900;\n  text-transform: uppercase;\n  background-color: #3365A0;\n  color: #FDC500;\n  padding: 2em;\n\n  h1 {\n    margin: 0;\n  }\n\n  a {\n    text-decoration: none;\n    color: #FDC500;\n  }\n`;\n\nconst DistanceDisplay = styled.h1`\n  font-size: 1em;\n  font-weight: 900;\n  text-align: left;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  margin: 2em 0;\n`;\n\nfunction Results() {\n  const location = useLocation();\n  const [distance, setDistance] = useState(0);\n  const { getShipsPage, pageCount } = useShips();\n  const [ships, setShips] = useState([]);\n  const [page, setPage] = useState(1);\n\n  useEffect(()=>{\n    const query = new URLSearchParams(location.search);\n    setDistance(query.get('distance'));\n    getShipsPage(page).then(setShips);\n  }, [location, page, getShipsPage]);\n\n  const handleChange = (event, value) => {\n    setPage(value);\n  };\n\n  return (\n    <Container>\n      <Header>\n        <Link to=\"/\">\n          <h1>Spacetrip Stops Calculator</h1>\n        </Link>\n      </Header>\n      <Section>\n        <DistanceDisplay>{distance} Megalights</DistanceDisplay>\n        <p>Find out the number of stops for your ship</p>\n        <ListEntry\n          firstColumn=\"Spaceship\"\n          secondColumn=\"# of Stops\"\n        />\n        {ships.map(ShipEntry(distance))}\n        <Footer>\n          <Pagination count={pageCount} page={Number(page)} onChange={handleChange} />\n        </Footer>\n      </Section>\n    </Container>\n  );\n}\n\nexport default Results;","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Home from './pages/home';\nimport Results from './pages/results';\nimport ShipsProvider from './contexts/ships';\n\nfunction App() {\n  return (\n    <ShipsProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/results\">\n            <Results />\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </Router>\n    </ShipsProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}